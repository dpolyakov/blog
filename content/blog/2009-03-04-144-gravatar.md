---
title: Граватары в комментах
date: '2009-03-04 01:31:55'
author: dima
id: '144'
type: post
slug: 2009-03-04-144
---

Начну издалека... Думаю что такое "аватарка" знают все. Для тех кто не в курсе - поясню - это маленькая картинка, которая ассоциируется с пользователем. Многие в качетве аватарки ставят свою фотку или выбирают какую либо картинку. И причем многие хотели бы, чтобы аватарка появлялась рядом с их каждым сообщением в сети. Кроме того, существует такой сервис Gravatar. И он как раз призван удовлетворять желание этих самых пользователей. Дело в том, что с его помощью можно привязать аватарку к e-mail\`у, а указывая этот ящик на сайтах, подключивших Gravatar добиться показа своей аватарки.  
Если вы пользователь, то все просто - регистрируйтесь в [сервисе](https://gravatar.com), указывайте ящик и привязвайте к нему картинку.  
Для тех, кто хочет подключить Gravatar к своему сайту инструкция ниже:

Если ваш сайт использует MovableType, WordPress, TextPattern, Drupal - вам повезло! Для вас есть уже [готовые решения](https://en.gravatar.com/site/implement). Другим тоже советую заглянуть и поискать в списке свою CMS.

Если вы пользователь Ucoz или ваш сайт не имеет возможности использовать языки программирования - я расскажу как быстро реализовать поддержку Gravatar самому. Рассматривать буду как сделать на юкозе, остальные по аналогии поймут.  
Итак, начнем...  
1\. [Скачиваем](https://pajhome.org.uk/crypt/md5/md5.js) java-скрипт, который поможет нам с шифрованием данных в MD5. Дело в том, что адрес аватарки в системе выглядит так: _https://www.gravatar.com/avatar/MD5-хеш e-mail_  
С помощью этого скрипта мы MD5-хеш и получим. Скачали. Загружаем к себе на сайт. Подключаем его к своей страничке  
`<script src="_адрес\_сайта_/md5.js" type="text/javascript"></script> ` 
2\. В шаблоне комментария вставляем следующий код:  
```js
<script type="text/javascript"><!--  
hash = hex\_md5("$EMAIL$");  
document.write("<img src='https://www.gravatar.com/avatar/"+hash+"?d=wavatar&s=80&r=g'>");  
//--></script>  
  ```
3\. Сохраняемся - проверяем.

**UPD** [Усовершенствованная версия на jQuery](http://my-html.ru/blog/gravatar_v_kommentarijakh_na_jquery/2010-01-10-7)